<% action = user.persisted? ? user_url(user) : users_url %>
<% method = user.persisted? ? "patch" : "post" %>
<% submit_message = user.persisted? ? "Sign Up" : "Log In" %>


<form action="<%= action %>" method="POST">
    <input type="hidden" name="_method" value="<%= method %>">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">

    <label for="username">Username:</label>
    <input type="text" name="user[username]" id="username">
    <br>
    <br>

    <label for="password">Password:</label>
    <input type="password" name="user[password]" id="password">
    <br>
    <br>

    <label for="password_confirmation">Confirm Password:</label>
    <input type="password" name="user[password_confirmation]" id="password_confirmation">
    <br>
    <br>

    <input type="submit" value="<%= submit_message %>">
</form>